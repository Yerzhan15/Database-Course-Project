<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>Database Project</title>
      <link rel="stylesheet" href="@{'/public/stylesheets/style.css'}">
      <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.7.1/jquery.min.js" type="text/javascript"></script>
      <script src='http://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js'></script>
      <script src="@{'/public/javascripts/index.js'}"></script>
</head>

<body>
  <div class="login-page">
  <div class="form">
    <form class="register-form">
      <input id = "userName" type="text" placeholder="name"/>
      <input id = "userSurname" type="text" placeholder="surname"/>
      <input id = "userEmail" type="text" placeholder="email address"/>
      <input id = "userPassword" type="password" placeholder="password"/>
      <button id = "createUser">create</button>
      <p class="message">Already registered? <a href="#">Sign In</a></p>
    </form>
    <form class="login-form" action="/application/loginUser">
      <input id = "userEmailLogin" type="text" placeholder="username" name="userEmail"/>
      <input id = "userPasswordLogin" type="password" placeholder="password" name="userPassword"/>
      <button id = "loginUser">login</button>
      <p class="message">Not registered? <a href="#">Create an account</a></p>
    </form>
  </div>
</div>

  <script type="text/javascript">
		$('#createUser').click(function() {
			$.post('@{createUser()}', {userName: $("#userName").val(), userSurname: $("#userSurname").val(), userEmail: $("#userEmail").val(), userPassword: $("#userPassword").val()})
		})

        $('#loginUser').click(function(event) {
            event.preventDefault();
            $.post('@{loginUser()}', {userEmail: $("#userEmailLogin").val(), userPassword: $("#userPasswordLogin").val()}).done(function(data) {
                if (data == 'success') {
                    window.location.replace("@{HomePage.index()}");
                } else if (data == 'error') {
                    alert("Password or username is incorrect");
                }
            });
        });
	</script>

</body>
</html>
